(()=>{let e;var t={},l=(t={convertWei:function(e,t,l){let o,s,c,i,n=e.toString();return("-"===n.charAt(0)?(n=n.substring(1),i=!0):i=!1,n.length>t)?(","===(o=(o=(o=n.substring(0,n.length-t)).split("").reverse().join("")).replace(/(\d{3})/g,"$1,")).slice(-1)&&(o=o.slice(0,-1)),o=o.split("").reverse().join(""),","===(s=(s=(s=n.substring(n.length-t,n.length)).substring(0,l)).replace(/(\d{3})/g,"$1,")).slice(-1)&&(s=s.slice(0,-1)),c=o+"."+s):(","===(s=(s=(s=(s=n.substring(n.length-t,n.length)).substring(0,l)).padStart(l,"0")).replace(/(\d{3})/g,"$1,")).slice(-1)&&(s=s.slice(0,-1)),c="0."+s),!0==i&&(c="-"+c),"."===c.slice(-1)&&(c=c.slice(0,-1)),c},convertHex:function(e){if(!e.match(/^(0x)?[0-9A-Fa-f]+$/))throw Error("Invalid hexadecimal input");e.startsWith("0x")&&(e=e.slice(2));let t=0;e=e.toUpperCase();for(let l=0;l<e.length;l++){let o="0123456789ABCDEF".indexOf(e[l]);t=16*t+o}return t}}).convertWei,o=t.convertHex;chrome.contextMenus.create({id:"Wei to Eth",title:"Wei to Eth",contexts:["selection"]}),chrome.contextMenus.create({id:"Hex Converter",title:"Hex Converter",contexts:["selection"]});let s={decimalsValue:1,displayDecimalsValue:1};chrome.storage.local.get(["decimals"]).then(e=>{s.decimalsValue=+e.decimals}),chrome.storage.local.get(["displayDecimals"]).then(e=>{s.displayDecimalsValue=+e.displayDecimals}),chrome.contextMenus.onClicked.addListener(function(t,o){if("Wei to Eth"===t.menuItemId){e=t.selectionText,console.log(s.decimalsValue),console.log(s.displayDecimalsValue);let o=l(t.selectionText,s.decimalsValue,s.displayDecimalsValue);console.log(e),console.log(o),chrome.storage.local.set({Str:o}),chrome.storage.local.set({conversionType:"wei"}),chrome.storage.local.set({preConverted:e})}}),chrome.contextMenus.onClicked.addListener(function(t,c){if("Hex Converter"===t.menuItemId){e=t.selectionText;let c=l(o(t.selectionText),s.decimalsValue,s.displayDecimalsValue);console.log(e),chrome.storage.local.set({Str:c}),chrome.storage.local.set({conversionType:"hex"}),chrome.storage.local.set({preConverted:e})}})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TyxPQUFBLENBQVEsS0FBQSxDQUFNLEdBQUEsQ0FBSSxDQUFFLGVBQWdCLEtBQU0sR0FDakQsT0FBTyxPQUFBLENBQVEsS0FBQSxDQUFNLEdBQUEsQ0FBSSxDQUFFLGFBQWMsQ0FBYSxFQUMxRCxDQUNKLEUsQyIsInNvdXJjZXMiOlsiPGFub24+Iiwic3JjL2JhY2tncm91bmQuanMiLCJzcmMvY29udmVydGVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIoKCkgPT4ge1xudmFyICQyMTNhNmM2OTEzOGZlZmJhJGV4cG9ydHMgPSB7fTtcbmZ1bmN0aW9uICQyMTNhNmM2OTEzOGZlZmJhJHZhciRjb252ZXJ0V2VpKG51bSwgZGVjaW1hbHMsIGRpc3BsYXlEZWNpbWFscykge1xuICAgIGxldCBzdHIgPSBudW0udG9TdHJpbmcoKTtcbiAgICBsZXQgd2hvbGVEaWdldHM7XG4gICAgbGV0IHNtYWxsRGlnZXRzO1xuICAgIGxldCBmb3JtYXR0ZWROdW1iO1xuICAgIGxldCBuZWdpdGl2ZTtcbiAgICBpZiAoc3RyLmNoYXJBdCgwKSA9PT0gXCItXCIpIHtcbiAgICAgICAgc3RyID0gc3RyLnN1YnN0cmluZygxKTtcbiAgICAgICAgbmVnaXRpdmUgPSB0cnVlO1xuICAgIH0gZWxzZSBuZWdpdGl2ZSA9IGZhbHNlO1xuICAgIGlmIChzdHIubGVuZ3RoID4gZGVjaW1hbHMpIHtcbiAgICAgICAgd2hvbGVEaWdldHMgPSBzdHIuc3Vic3RyaW5nKDAsIHN0ci5sZW5ndGggLSBkZWNpbWFscyk7XG4gICAgICAgIC8vIFJldmVyc2UgdGhlIHN0cmluZyBmb3IgZWFzaWVyIG1hbmlwdWxhdGlvblxuICAgICAgICB3aG9sZURpZ2V0cyA9IHdob2xlRGlnZXRzLnNwbGl0KFwiXCIpLnJldmVyc2UoKS5qb2luKFwiXCIpO1xuICAgICAgICAvLyBJbnNlcnQgY29tbWFzIGFmdGVyIGV2ZXJ5IHRocmVlIGNoYXJhY3RlcnNcbiAgICAgICAgd2hvbGVEaWdldHMgPSB3aG9sZURpZ2V0cy5yZXBsYWNlKC8oXFxkezN9KS9nLCBcIiQxLFwiKTtcbiAgICAgICAgLy8gUmVtb3ZlIHRyYWlsaW5nIGNvbW1hIGlmIHByZXNlbnRcbiAgICAgICAgaWYgKHdob2xlRGlnZXRzLnNsaWNlKC0xKSA9PT0gXCIsXCIpIHdob2xlRGlnZXRzID0gd2hvbGVEaWdldHMuc2xpY2UoMCwgLTEpO1xuICAgICAgICAvLyBSZXZlcnNlIHRoZSBzdHJpbmcgYmFjayB0byBpdHMgb3JpZ2luYWwgb3JkZXJcbiAgICAgICAgd2hvbGVEaWdldHMgPSB3aG9sZURpZ2V0cy5zcGxpdChcIlwiKS5yZXZlcnNlKCkuam9pbihcIlwiKTtcbiAgICAgICAgLy8gc2VsZWN0cyBvbmx5IHRoZSBkZWNpYW1sc1xuICAgICAgICBzbWFsbERpZ2V0cyA9IHN0ci5zdWJzdHJpbmcoc3RyLmxlbmd0aCAtIGRlY2ltYWxzLCBzdHIubGVuZ3RoKTtcbiAgICAgICAgLy90cnVuY2F0aW5nIGRpZ2V0c1xuICAgICAgICBzbWFsbERpZ2V0cyA9IHNtYWxsRGlnZXRzLnN1YnN0cmluZygwLCBkaXNwbGF5RGVjaW1hbHMpO1xuICAgICAgICAvL1xuICAgICAgICAvLyBJbnNlcnQgY29tbWFzIGFmdGVyIGV2ZXJ5IHRocmVlIGNoYXJhY3RlcnNcbiAgICAgICAgc21hbGxEaWdldHMgPSBzbWFsbERpZ2V0cy5yZXBsYWNlKC8oXFxkezN9KS9nLCBcIiQxLFwiKTtcbiAgICAgICAgLy8gUmVtb3ZlIHRyYWlsaW5nIGNvbW1hIGlmIHByZXNlbnRcbiAgICAgICAgaWYgKHNtYWxsRGlnZXRzLnNsaWNlKC0xKSA9PT0gXCIsXCIpIHNtYWxsRGlnZXRzID0gc21hbGxEaWdldHMuc2xpY2UoMCwgLTEpO1xuICAgICAgICBmb3JtYXR0ZWROdW1iID0gd2hvbGVEaWdldHMgKyBcIi5cIiArIHNtYWxsRGlnZXRzO1xuICAgICAgICAvLyBBZGRzIG5lZ2l0aXZlcyBiYWNrIGluXG4gICAgICAgIGlmIChuZWdpdGl2ZSA9PSB0cnVlKSBmb3JtYXR0ZWROdW1iID0gXCItXCIgKyBmb3JtYXR0ZWROdW1iO1xuICAgICAgICAvLyBSZW1vdmUgdHJhaWxpbmcgY29tbWEgaWYgcHJlc2VudFxuICAgICAgICBpZiAoZm9ybWF0dGVkTnVtYi5zbGljZSgtMSkgPT09IFwiLlwiKSBmb3JtYXR0ZWROdW1iID0gZm9ybWF0dGVkTnVtYi5zbGljZSgwLCAtMSk7XG4gICAgICAgIHJldHVybiBmb3JtYXR0ZWROdW1iO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHNlbGVjdHMgb25seSB0aGUgZGVjaWFtbHNcbiAgICAgICAgc21hbGxEaWdldHMgPSBzdHIuc3Vic3RyaW5nKHN0ci5sZW5ndGggLSBkZWNpbWFscywgc3RyLmxlbmd0aCk7XG4gICAgICAgIC8vdHJ1bmNhdGluZyBkaWdldHNcbiAgICAgICAgc21hbGxEaWdldHMgPSBzbWFsbERpZ2V0cy5zdWJzdHJpbmcoMCwgZGlzcGxheURlY2ltYWxzKTtcbiAgICAgICAgc21hbGxEaWdldHMgPSBzbWFsbERpZ2V0cy5wYWRTdGFydChkaXNwbGF5RGVjaW1hbHMsIFwiMFwiKTtcbiAgICAgICAgLy8gSW5zZXJ0IGNvbW1hcyBhZnRlciBldmVyeSB0aHJlZSBjaGFyYWN0ZXJzXG4gICAgICAgIHNtYWxsRGlnZXRzID0gc21hbGxEaWdldHMucmVwbGFjZSgvKFxcZHszfSkvZywgXCIkMSxcIik7XG4gICAgICAgIC8vIFJlbW92ZSB0cmFpbGluZyBjb21tYSBpZiBwcmVzZW50XG4gICAgICAgIGlmIChzbWFsbERpZ2V0cy5zbGljZSgtMSkgPT09IFwiLFwiKSBzbWFsbERpZ2V0cyA9IHNtYWxsRGlnZXRzLnNsaWNlKDAsIC0xKTtcbiAgICAgICAgZm9ybWF0dGVkTnVtYiA9IFwiMC5cIiArIHNtYWxsRGlnZXRzO1xuICAgICAgICAvLyBBZGRzIG5lZ2l0aXZlcyBiYWNrIGluXG4gICAgICAgIGlmIChuZWdpdGl2ZSA9PSB0cnVlKSBmb3JtYXR0ZWROdW1iID0gXCItXCIgKyBmb3JtYXR0ZWROdW1iO1xuICAgICAgICAvLyBSZW1vdmUgdHJhaWxpbmcgY29tbWEgaWYgcHJlc2VudFxuICAgICAgICBpZiAoZm9ybWF0dGVkTnVtYi5zbGljZSgtMSkgPT09IFwiLlwiKSBmb3JtYXR0ZWROdW1iID0gZm9ybWF0dGVkTnVtYi5zbGljZSgwLCAtMSk7XG4gICAgICAgIHJldHVybiBmb3JtYXR0ZWROdW1iO1xuICAgIH1cbn1cbmZ1bmN0aW9uICQyMTNhNmM2OTEzOGZlZmJhJHZhciRjb252ZXJ0SGV4KGhleCkge1xuICAgIC8vIFZhbGlkYXRlIHRoZSBpbnB1dFxuICAgIGlmICghaGV4Lm1hdGNoKC9eKDB4KT9bMC05QS1GYS1mXSskLykpIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaGV4YWRlY2ltYWwgaW5wdXRcIik7XG4gICAgaWYgKGhleC5zdGFydHNXaXRoKFwiMHhcIikpIGhleCA9IGhleC5zbGljZSgyKTtcbiAgICAvLyBDb252ZXJ0IHRoZSBoZXhhZGVjaW1hbCB0byBkZWNpbWFsXG4gICAgbGV0IGRlY2ltYWwgPSAwO1xuICAgIGNvbnN0IGhleERpZ2l0cyA9IFwiMDEyMzQ1Njc4OUFCQ0RFRlwiO1xuICAgIGhleCA9IGhleC50b1VwcGVyQ2FzZSgpO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBoZXgubGVuZ3RoOyBpKyspe1xuICAgICAgICBjb25zdCBkaWdpdCA9IGhleERpZ2l0cy5pbmRleE9mKGhleFtpXSk7XG4gICAgICAgIGRlY2ltYWwgPSBkZWNpbWFsICogMTYgKyBkaWdpdDtcbiAgICB9XG4gICAgcmV0dXJuIGRlY2ltYWw7XG59XG4kMjEzYTZjNjkxMzhmZWZiYSRleHBvcnRzID0ge1xuICAgIGNvbnZlcnRXZWk6ICQyMTNhNmM2OTEzOGZlZmJhJHZhciRjb252ZXJ0V2VpLFxuICAgIGNvbnZlcnRIZXg6ICQyMTNhNmM2OTEzOGZlZmJhJHZhciRjb252ZXJ0SGV4XG59O1xuXG5cbnZhciAkMTc2N2Y0MWU0YWZjZTMwNCRyZXF1aXJlJGNvbnZlcnRXZWkgPSAkMjEzYTZjNjkxMzhmZWZiYSRleHBvcnRzLmNvbnZlcnRXZWk7XG52YXIgJDE3NjdmNDFlNGFmY2UzMDQkcmVxdWlyZSRjb252ZXJ0SGV4ID0gJDIxM2E2YzY5MTM4ZmVmYmEkZXhwb3J0cy5jb252ZXJ0SGV4O1xuY2hyb21lLmNvbnRleHRNZW51cy5jcmVhdGUoe1xuICAgIGlkOiBcIldlaSB0byBFdGhcIixcbiAgICB0aXRsZTogXCJXZWkgdG8gRXRoXCIsXG4gICAgY29udGV4dHM6IFtcbiAgICAgICAgXCJzZWxlY3Rpb25cIlxuICAgIF1cbn0pO1xuY2hyb21lLmNvbnRleHRNZW51cy5jcmVhdGUoe1xuICAgIGlkOiBcIkhleCBDb252ZXJ0ZXJcIixcbiAgICB0aXRsZTogXCJIZXggQ29udmVydGVyXCIsXG4gICAgY29udGV4dHM6IFtcbiAgICAgICAgXCJzZWxlY3Rpb25cIlxuICAgIF1cbn0pO1xubGV0ICQxNzY3ZjQxZTRhZmNlMzA0JHZhciRjb25maWcgPSB7XG4gICAgZGVjaW1hbHNWYWx1ZTogMSxcbiAgICBkaXNwbGF5RGVjaW1hbHNWYWx1ZTogMVxufTtcbmNocm9tZS5zdG9yYWdlLmxvY2FsLmdldChbXG4gICAgXCJkZWNpbWFsc1wiXG5dKS50aGVuKChyZXN1bHQpPT57XG4gICAgJDE3NjdmNDFlNGFmY2UzMDQkdmFyJGNvbmZpZy5kZWNpbWFsc1ZhbHVlID0gK3Jlc3VsdC5kZWNpbWFscztcbn0pO1xuY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KFtcbiAgICBcImRpc3BsYXlEZWNpbWFsc1wiXG5dKS50aGVuKChyZXN1bHQpPT57XG4gICAgJDE3NjdmNDFlNGFmY2UzMDQkdmFyJGNvbmZpZy5kaXNwbGF5RGVjaW1hbHNWYWx1ZSA9ICtyZXN1bHQuZGlzcGxheURlY2ltYWxzO1xufSk7XG5sZXQgJDE3NjdmNDFlNGFmY2UzMDQkdmFyJHByZUNvbnZlcnRlZDtcbmNocm9tZS5jb250ZXh0TWVudXMub25DbGlja2VkLmFkZExpc3RlbmVyKGZ1bmN0aW9uKGluZm8sIHRhYikge1xuICAgIGlmIChpbmZvLm1lbnVJdGVtSWQgPT09IFwiV2VpIHRvIEV0aFwiKSB7XG4gICAgICAgICQxNzY3ZjQxZTRhZmNlMzA0JHZhciRwcmVDb252ZXJ0ZWQgPSBpbmZvLnNlbGVjdGlvblRleHQ7XG4gICAgICAgIGNvbnNvbGUubG9nKCQxNzY3ZjQxZTRhZmNlMzA0JHZhciRjb25maWcuZGVjaW1hbHNWYWx1ZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCQxNzY3ZjQxZTRhZmNlMzA0JHZhciRjb25maWcuZGlzcGxheURlY2ltYWxzVmFsdWUpO1xuICAgICAgICBsZXQgY29udmVydGVkRXRoID0gJDE3NjdmNDFlNGFmY2UzMDQkcmVxdWlyZSRjb252ZXJ0V2VpKGluZm8uc2VsZWN0aW9uVGV4dCwgJDE3NjdmNDFlNGFmY2UzMDQkdmFyJGNvbmZpZy5kZWNpbWFsc1ZhbHVlLCAkMTc2N2Y0MWU0YWZjZTMwNCR2YXIkY29uZmlnLmRpc3BsYXlEZWNpbWFsc1ZhbHVlKTtcbiAgICAgICAgY29uc29sZS5sb2coJDE3NjdmNDFlNGFmY2UzMDQkdmFyJHByZUNvbnZlcnRlZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGNvbnZlcnRlZEV0aCk7XG4gICAgICAgIGNocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7XG4gICAgICAgICAgICBTdHI6IGNvbnZlcnRlZEV0aFxuICAgICAgICB9KTtcbiAgICAgICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHtcbiAgICAgICAgICAgIGNvbnZlcnNpb25UeXBlOiBcIndlaVwiXG4gICAgICAgIH0pO1xuICAgICAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoe1xuICAgICAgICAgICAgcHJlQ29udmVydGVkOiAkMTc2N2Y0MWU0YWZjZTMwNCR2YXIkcHJlQ29udmVydGVkXG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuY2hyb21lLmNvbnRleHRNZW51cy5vbkNsaWNrZWQuYWRkTGlzdGVuZXIoZnVuY3Rpb24oaW5mbywgdGFiKSB7XG4gICAgaWYgKGluZm8ubWVudUl0ZW1JZCA9PT0gXCJIZXggQ29udmVydGVyXCIpIHtcbiAgICAgICAgJDE3NjdmNDFlNGFmY2UzMDQkdmFyJHByZUNvbnZlcnRlZCA9IGluZm8uc2VsZWN0aW9uVGV4dDtcbiAgICAgICAgbGV0IGNvbnZlcnRlZEhleCA9ICQxNzY3ZjQxZTRhZmNlMzA0JHJlcXVpcmUkY29udmVydEhleChpbmZvLnNlbGVjdGlvblRleHQpO1xuICAgICAgICBsZXQgY3V0SGV4ID0gJDE3NjdmNDFlNGFmY2UzMDQkcmVxdWlyZSRjb252ZXJ0V2VpKGNvbnZlcnRlZEhleCwgJDE3NjdmNDFlNGFmY2UzMDQkdmFyJGNvbmZpZy5kZWNpbWFsc1ZhbHVlLCAkMTc2N2Y0MWU0YWZjZTMwNCR2YXIkY29uZmlnLmRpc3BsYXlEZWNpbWFsc1ZhbHVlKTtcbiAgICAgICAgY29uc29sZS5sb2coJDE3NjdmNDFlNGFmY2UzMDQkdmFyJHByZUNvbnZlcnRlZCk7XG4gICAgICAgIGNocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7XG4gICAgICAgICAgICBTdHI6IGN1dEhleFxuICAgICAgICB9KTtcbiAgICAgICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHtcbiAgICAgICAgICAgIGNvbnZlcnNpb25UeXBlOiBcImhleFwiXG4gICAgICAgIH0pO1xuICAgICAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoe1xuICAgICAgICAgICAgcHJlQ29udmVydGVkOiAkMTc2N2Y0MWU0YWZjZTMwNCR2YXIkcHJlQ29udmVydGVkXG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG59KSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SnRZWEJ3YVc1bmN5STZJanM3UVVOQlFTeFRRVUZUTEdsRFFVRlhMRWRCUVVjc1JVRkJSU3hSUVVGUkxFVkJRVVVzWlVGQlpUdEpRVU01UXl4SlFVRkpMRTFCUVUwc1NVRkJTVHRKUVVOa0xFbEJRVWs3U1VGRFNpeEpRVUZKTzBsQlEwb3NTVUZCU1R0SlFVTktMRWxCUVVrN1NVRkZTaXhKUVVGSkxFbEJRVWtzVDBGQlR5eFBRVUZQTEV0QlFVczdVVUZEZGtJc1RVRkJUU3hKUVVGSkxGVkJRVlU3VVVGRGNFSXNWMEZCVnp0SlFVTm1MRTlCUTBrc1YwRkJWenRKUVVkbUxFbEJRVWtzU1VGQlNTeFRRVUZUTEZWQlFWVTdVVUZEZGtJc1kwRkJZeXhKUVVGSkxGVkJRVlVzUjBGQlJ5eEpRVUZKTEZOQlFWTTdVVUZGTlVNc05rTkJRVFpETzFGQlF6ZERMR05CUVdNc1dVRkJXU3hOUVVGTkxFbEJRVWtzVlVGQlZTeExRVUZMTzFGQlJXNUVMRFpEUVVFMlF6dFJRVU0zUXl4alFVRmpMRmxCUVZrc1VVRkJVU3haUVVGWk8xRkJSVGxETEcxRFFVRnRRenRSUVVOdVF5eEpRVUZKTEZsQlFWa3NUVUZCVFN4UlFVRlJMRXRCUXpGQ0xHTkJRV01zV1VGQldTeE5RVUZOTEVkQlFVYzdVVUZIZGtNc1owUkJRV2RFTzFGQlEyaEVMR05CUVdNc1dVRkJXU3hOUVVGTkxFbEJRVWtzVlVGQlZTeExRVUZMTzFGQlJXNUVMRFJDUVVFMFFqdFJRVU0xUWl4alFVRmpMRWxCUVVrc1ZVRkJWU3hKUVVGSkxGTkJRVk1zVlVGQlZTeEpRVUZKTzFGQlEzWkVMRzFDUVVGdFFqdFJRVU51UWl4alFVRmpMRmxCUVZrc1ZVRkJWU3hIUVVGSE8xRkJRM1pETEVWQlFVVTdVVUZEUml3MlEwRkJOa003VVVGRE4wTXNZMEZCWXl4WlFVRlpMRkZCUVZFc1dVRkJXVHRSUVVVNVF5eHRRMEZCYlVNN1VVRkRia01zU1VGQlNTeFpRVUZaTEUxQlFVMHNVVUZCVVN4TFFVTXhRaXhqUVVGakxGbEJRVmtzVFVGQlRTeEhRVUZITzFGQlIzWkRMR2RDUVVGblFpeGpRVUZqTEUxQlFVMDdVVUZGY0VNc2VVSkJRWGxDTzFGQlEzcENMRWxCUVVrc1dVRkJXU3hOUVVOYUxHZENRVUZuUWl4TlFVRk5PMUZCUnpGQ0xHMURRVUZ0UXp0UlFVTnVReXhKUVVGSkxHTkJRV01zVFVGQlRTeFJRVUZSTEV0QlF6VkNMR2RDUVVGblFpeGpRVUZqTEUxQlFVMHNSMEZCUnp0UlFVY3pReXhQUVVGUE8wbEJRMWdzVDBGQlR6dFJRVU5JTERSQ1FVRTBRanRSUVVNMVFpeGpRVUZqTEVsQlFVa3NWVUZCVlN4SlFVRkpMRk5CUVZNc1ZVRkJWU3hKUVVGSk8xRkJRM1pFTEcxQ1FVRnRRanRSUVVOdVFpeGpRVUZqTEZsQlFWa3NWVUZCVlN4SFFVRkhPMUZCUlhaRExHTkJRV01zV1VGQldTeFRRVUZUTEdsQ1FVRnBRanRSUVVWd1JDdzJRMEZCTmtNN1VVRkROME1zWTBGQll5eFpRVUZaTEZGQlFWRXNXVUZCV1R0UlFVVTVReXh0UTBGQmJVTTdVVUZEYmtNc1NVRkJTU3haUVVGWkxFMUJRVTBzVVVGQlVTeExRVU14UWl4alFVRmpMRmxCUVZrc1RVRkJUU3hIUVVGSE8xRkJSM1pETEdkQ1FVRm5RaXhQUVVGUE8xRkJSWFpDTEhsQ1FVRjVRanRSUVVONlFpeEpRVUZKTEZsQlFWa3NUVUZEV2l4blFrRkJaMElzVFVGQlRUdFJRVWN4UWl4dFEwRkJiVU03VVVGRGJrTXNTVUZCU1N4alFVRmpMRTFCUVUwc1VVRkJVU3hMUVVNMVFpeG5Ra0ZCWjBJc1kwRkJZeXhOUVVGTkxFZEJRVWM3VVVGSE0wTXNUMEZCVHp0SlFVTllPMEZCUTBvN1FVRkZRU3hUUVVGVExHbERRVUZYTEVkQlFVYzdTVUZEYmtJc2NVSkJRWEZDTzBsQlEzSkNMRWxCUVVrc1EwRkJReXhKUVVGSkxFMUJRVTBzZDBKQlExZ3NUVUZCVFN4SlFVRkpMRTFCUVUwN1NVRkhjRUlzU1VGQlNTeEpRVUZKTEZkQlFWY3NUMEZEWml4TlFVRk5MRWxCUVVrc1RVRkJUVHRKUVVkd1FpeHhRMEZCY1VNN1NVRkRja01zU1VGQlNTeFZRVUZWTzBsQlEyUXNUVUZCVFN4WlFVRlpPMGxCUTJ4Q0xFMUJRVTBzU1VGQlNUdEpRVVZXTEVsQlFVc3NTVUZCU1N4SlFVRkpMRWRCUVVjc1NVRkJTU3hKUVVGSkxGRkJRVkVzU1VGQlN6dFJRVU5xUXl4TlFVRk5MRkZCUVZFc1ZVRkJWU3hSUVVGUkxFZEJRVWNzUTBGQlF5eEZRVUZGTzFGQlEzUkRMRlZCUVZVc1ZVRkJWU3hMUVVGTE8wbEJRemRDTzBsQlJVRXNUMEZCVHp0QlFVTllPMEZCUlVFc05FSkJRV2xDTzJkQ1FVTmlPMmRDUVVOQk8wRkJRMG83T3pzeVEwUnVTRTA3TWtOQlFVRTdRVUZGVGl4UFFVRlBMR0ZCUVdFc1QwRkJUenRKUVVOMlFpeEpRVUZKTzBsQlEwb3NUMEZCVHp0SlFVTlFMRlZCUVZVN1VVRkJRenRMUVVGWk8wRkJRek5DTzBGQlJVRXNUMEZCVHl4aFFVRmhMRTlCUVU4N1NVRkRka0lzU1VGQlNUdEpRVU5LTEU5QlFVODdTVUZEVUN4VlFVRlZPMUZCUVVNN1MwRkJXVHRCUVVNelFqdEJRVVZCTEVsQlFVa3NLMEpCUVZNN1NVRkRWQ3hsUVVGbE8wbEJRMllzYzBKQlFYTkNPMEZCUXpGQ08wRkJRMEVzVDBGQlR5eFJRVUZSTEUxQlFVMHNTVUZCU1R0SlFVRkRPME5CUVZjc1JVRkJSU3hMUVVGTExFTkJRVU03U1VGRGVrTXNOa0pCUVU4c1owSkJRV2RDTEVOQlFVTXNUMEZCVHp0QlFVTnVRenRCUVVWQkxFOUJRVThzVVVGQlVTeE5RVUZOTEVsQlFVazdTVUZCUXp0RFFVRnJRaXhGUVVGRkxFdEJRVXNzUTBGQlF6dEpRVU5vUkN3MlFrRkJUeXgxUWtGQmRVSXNRMEZCUXl4UFFVRlBPMEZCUXpGRE8wRkJSVUVzU1VGQlNUdEJRVU5LTEU5QlFVOHNZVUZCWVN4VlFVRlZMRmxCUVZrc1UwRkJWU3hKUVVGSkxFVkJRVVVzUjBGQlJ6dEpRVU42UkN4SlFVRkpMRXRCUVVzc1pVRkJaU3hqUVVGak8xRkJRMnhETEhGRFFVRmxMRXRCUVVzN1VVRkRjRUlzVVVGQlVTeEpRVUZKTERaQ1FVRlBPMUZCUTI1Q0xGRkJRVkVzU1VGQlNTdzJRa0ZCVHp0UlFVVnVRaXhKUVVGSkxHVkJRV1VzY1VOQlEyWXNTMEZCU3l4bFFVTk1MRFpDUVVGUExHVkJRMUFzTmtKQlFVODdVVUZGV0N4UlFVRlJMRWxCUVVrN1VVRkRXaXhSUVVGUkxFbEJRVWs3VVVGRFdpeFBRVUZQTEZGQlFWRXNUVUZCVFN4SlFVRkpPMWxCUVVVc1MwRkJTenRSUVVGaE8xRkJRemRETEU5QlFVOHNVVUZCVVN4TlFVRk5MRWxCUVVrN1dVRkJSU3huUWtGQlowSTdVVUZCVFR0UlFVTnFSQ3hQUVVGUExGRkJRVkVzVFVGQlRTeEpRVUZKTzFsQlFVVXNZMEZCWXp0UlFVRmhPMGxCUXpGRU8wRkJRMG83UVVGRlFTeFBRVUZQTEdGQlFXRXNWVUZCVlN4WlFVRlpMRk5CUVZVc1NVRkJTU3hGUVVGRkxFZEJRVWM3U1VGRGVrUXNTVUZCU1N4TFFVRkxMR1ZCUVdVc2FVSkJRV2xDTzFGQlEzSkRMSEZEUVVGbExFdEJRVXM3VVVGRGNFSXNTVUZCU1N4bFFVRmxMSEZEUVVGWExFdEJRVXM3VVVGRGJrTXNTVUZCU1N4VFFVRlRMSEZEUVVOVUxHTkJRMEVzTmtKQlFVOHNaVUZEVUN3MlFrRkJUenRSUVVWWUxGRkJRVkVzU1VGQlNUdFJRVU5hTEU5QlFVOHNVVUZCVVN4TlFVRk5MRWxCUVVrN1dVRkJSU3hMUVVGTE8xRkJRVTg3VVVGRGRrTXNUMEZCVHl4UlFVRlJMRTFCUVUwc1NVRkJTVHRaUVVGRkxHZENRVUZuUWp0UlFVRk5PMUZCUTJwRUxFOUJRVThzVVVGQlVTeE5RVUZOTEVsQlFVazdXVUZCUlN4alFVRmpPMUZCUVdFN1NVRkRNVVE3UVVGRFNpSXNJbk52ZFhKalpYTWlPbHNpYzNKakwySmhZMnRuY205MWJtUXVhbk1pTENKemNtTXZZMjl1ZG1WeWRHVnljeTVxY3lKZExDSnpiM1Z5WTJWelEyOXVkR1Z1ZENJNld5SmpiMjV6ZENCN0lHTnZiblpsY25SWFpXa3NJR052Ym5abGNuUklaWGdnZlNBOUlISmxjWFZwY21Vb0p5NHZZMjl1ZG1WeWRHVnljeWNwWEc1Y2JtTm9jbTl0WlM1amIyNTBaWGgwVFdWdWRYTXVZM0psWVhSbEtIdGNiaUFnSUNCcFpEb2dKMWRsYVNCMGJ5QkZkR2duTEZ4dUlDQWdJSFJwZEd4bE9pQW5WMlZwSUhSdklFVjBhQ2NzWEc0Z0lDQWdZMjl1ZEdWNGRITTZJRnNuYzJWc1pXTjBhVzl1SjEwc1hHNTlLVnh1WEc1amFISnZiV1V1WTI5dWRHVjRkRTFsYm5WekxtTnlaV0YwWlNoN1hHNGdJQ0FnYVdRNklDZElaWGdnUTI5dWRtVnlkR1Z5Snl4Y2JpQWdJQ0IwYVhSc1pUb2dKMGhsZUNCRGIyNTJaWEowWlhJbkxGeHVJQ0FnSUdOdmJuUmxlSFJ6T2lCYkozTmxiR1ZqZEdsdmJpZGRMRnh1ZlNsY2JseHViR1YwSUdOdmJtWnBaeUE5SUh0Y2JpQWdJQ0JrWldOcGJXRnNjMVpoYkhWbE9pQXhMRnh1SUNBZ0lHUnBjM0JzWVhsRVpXTnBiV0ZzYzFaaGJIVmxPaUF4TEZ4dWZWeHVZMmh5YjIxbExuTjBiM0poWjJVdWJHOWpZV3d1WjJWMEtGc25aR1ZqYVcxaGJITW5YU2t1ZEdobGJpZ29jbVZ6ZFd4MEtTQTlQaUI3WEc0Z0lDQWdZMjl1Wm1sbkxtUmxZMmx0WVd4elZtRnNkV1VnUFNBcmNtVnpkV3gwTG1SbFkybHRZV3h6WEc1OUtWeHVYRzVqYUhKdmJXVXVjM1J2Y21GblpTNXNiMk5oYkM1blpYUW9XeWRrYVhOd2JHRjVSR1ZqYVcxaGJITW5YU2t1ZEdobGJpZ29jbVZ6ZFd4MEtTQTlQaUI3WEc0Z0lDQWdZMjl1Wm1sbkxtUnBjM0JzWVhsRVpXTnBiV0ZzYzFaaGJIVmxJRDBnSzNKbGMzVnNkQzVrYVhOd2JHRjVSR1ZqYVcxaGJITmNibjBwWEc1Y2JteGxkQ0J3Y21WRGIyNTJaWEowWldSY2JtTm9jbTl0WlM1amIyNTBaWGgwVFdWdWRYTXViMjVEYkdsamEyVmtMbUZrWkV4cGMzUmxibVZ5S0daMWJtTjBhVzl1SUNocGJtWnZMQ0IwWVdJcElIdGNiaUFnSUNCcFppQW9hVzVtYnk1dFpXNTFTWFJsYlVsa0lEMDlQU0FuVjJWcElIUnZJRVYwYUNjcElIdGNiaUFnSUNBZ0lDQWdjSEpsUTI5dWRtVnlkR1ZrSUQwZ2FXNW1ieTV6Wld4bFkzUnBiMjVVWlhoMFhHNGdJQ0FnSUNBZ0lHTnZibk52YkdVdWJHOW5LR052Ym1acFp5NWtaV05wYldGc2MxWmhiSFZsS1Z4dUlDQWdJQ0FnSUNCamIyNXpiMnhsTG14dlp5aGpiMjVtYVdjdVpHbHpjR3hoZVVSbFkybHRZV3h6Vm1Gc2RXVXBYRzVjYmlBZ0lDQWdJQ0FnYkdWMElHTnZiblpsY25SbFpFVjBhQ0E5SUdOdmJuWmxjblJYWldrb1hHNGdJQ0FnSUNBZ0lDQWdJQ0JwYm1adkxuTmxiR1ZqZEdsdmJsUmxlSFFzWEc0Z0lDQWdJQ0FnSUNBZ0lDQmpiMjVtYVdjdVpHVmphVzFoYkhOV1lXeDFaU3hjYmlBZ0lDQWdJQ0FnSUNBZ0lHTnZibVpwWnk1a2FYTndiR0Y1UkdWamFXMWhiSE5XWVd4MVpWeHVJQ0FnSUNBZ0lDQXBYRzRnSUNBZ0lDQWdJR052Ym5OdmJHVXViRzluS0hCeVpVTnZiblpsY25SbFpDbGNiaUFnSUNBZ0lDQWdZMjl1YzI5c1pTNXNiMmNvWTI5dWRtVnlkR1ZrUlhSb0tWeHVJQ0FnSUNBZ0lDQmphSEp2YldVdWMzUnZjbUZuWlM1c2IyTmhiQzV6WlhRb2V5QlRkSEk2SUdOdmJuWmxjblJsWkVWMGFDQjlLVnh1SUNBZ0lDQWdJQ0JqYUhKdmJXVXVjM1J2Y21GblpTNXNiMk5oYkM1elpYUW9leUJqYjI1MlpYSnphVzl1Vkhsd1pUb2dKM2RsYVNjZ2ZTbGNiaUFnSUNBZ0lDQWdZMmh5YjIxbExuTjBiM0poWjJVdWJHOWpZV3d1YzJWMEtIc2djSEpsUTI5dWRtVnlkR1ZrT2lCd2NtVkRiMjUyWlhKMFpXUWdmU2xjYmlBZ0lDQjlYRzU5S1Z4dVhHNWphSEp2YldVdVkyOXVkR1Y0ZEUxbGJuVnpMbTl1UTJ4cFkydGxaQzVoWkdSTWFYTjBaVzVsY2lobWRXNWpkR2x2YmlBb2FXNW1ieXdnZEdGaUtTQjdYRzRnSUNBZ2FXWWdLR2x1Wm04dWJXVnVkVWwwWlcxSlpDQTlQVDBnSjBobGVDQkRiMjUyWlhKMFpYSW5LU0I3WEc0Z0lDQWdJQ0FnSUhCeVpVTnZiblpsY25SbFpDQTlJR2x1Wm04dWMyVnNaV04wYVc5dVZHVjRkRnh1SUNBZ0lDQWdJQ0JzWlhRZ1kyOXVkbVZ5ZEdWa1NHVjRJRDBnWTI5dWRtVnlkRWhsZUNocGJtWnZMbk5sYkdWamRHbHZibFJsZUhRcFhHNGdJQ0FnSUNBZ0lHeGxkQ0JqZFhSSVpYZ2dQU0JqYjI1MlpYSjBWMlZwS0Z4dUlDQWdJQ0FnSUNBZ0lDQWdZMjl1ZG1WeWRHVmtTR1Y0TEZ4dUlDQWdJQ0FnSUNBZ0lDQWdZMjl1Wm1sbkxtUmxZMmx0WVd4elZtRnNkV1VzWEc0Z0lDQWdJQ0FnSUNBZ0lDQmpiMjVtYVdjdVpHbHpjR3hoZVVSbFkybHRZV3h6Vm1Gc2RXVmNiaUFnSUNBZ0lDQWdLVnh1SUNBZ0lDQWdJQ0JqYjI1emIyeGxMbXh2Wnlod2NtVkRiMjUyWlhKMFpXUXBYRzRnSUNBZ0lDQWdJR05vY205dFpTNXpkRzl5WVdkbExteHZZMkZzTG5ObGRDaDdJRk4wY2pvZ1kzVjBTR1Y0SUgwcFhHNGdJQ0FnSUNBZ0lHTm9jbTl0WlM1emRHOXlZV2RsTG14dlkyRnNMbk5sZENoN0lHTnZiblpsY25OcGIyNVVlWEJsT2lBbmFHVjRKeUI5S1Z4dUlDQWdJQ0FnSUNCamFISnZiV1V1YzNSdmNtRm5aUzVzYjJOaGJDNXpaWFFvZXlCd2NtVkRiMjUyWlhKMFpXUTZJSEJ5WlVOdmJuWmxjblJsWkNCOUtWeHVJQ0FnSUgxY2JuMHBYRzRpTENKbWRXNWpkR2x2YmlCamIyNTJaWEowVjJWcEtHNTFiU3dnWkdWamFXMWhiSE1zSUdScGMzQnNZWGxFWldOcGJXRnNjeWtnZTF4dUlDQWdJR3hsZENCemRISWdQU0J1ZFcwdWRHOVRkSEpwYm1jb0tWeHVJQ0FnSUd4bGRDQjNhRzlzWlVScFoyVjBjMXh1SUNBZ0lHeGxkQ0J6YldGc2JFUnBaMlYwYzF4dUlDQWdJR3hsZENCbWIzSnRZWFIwWldST2RXMWlYRzRnSUNBZ2JHVjBJRzVsWjJsMGFYWmxYRzVjYmlBZ0lDQnBaaUFvYzNSeUxtTm9ZWEpCZENnd0tTQTlQVDBnSnkwbktTQjdYRzRnSUNBZ0lDQWdJSE4wY2lBOUlITjBjaTV6ZFdKemRISnBibWNvTVNsY2JpQWdJQ0FnSUNBZ2JtVm5hWFJwZG1VZ1BTQjBjblZsWEc0Z0lDQWdmU0JsYkhObElIdGNiaUFnSUNBZ0lDQWdibVZuYVhScGRtVWdQU0JtWVd4elpWeHVJQ0FnSUgxY2JseHVJQ0FnSUdsbUlDaHpkSEl1YkdWdVozUm9JRDRnWkdWamFXMWhiSE1wSUh0Y2JpQWdJQ0FnSUNBZ2QyaHZiR1ZFYVdkbGRITWdQU0J6ZEhJdWMzVmljM1J5YVc1bktEQXNJSE4wY2k1c1pXNW5kR2dnTFNCa1pXTnBiV0ZzY3lsY2JseHVJQ0FnSUNBZ0lDQXZMeUJTWlhabGNuTmxJSFJvWlNCemRISnBibWNnWm05eUlHVmhjMmxsY2lCdFlXNXBjSFZzWVhScGIyNWNiaUFnSUNBZ0lDQWdkMmh2YkdWRWFXZGxkSE1nUFNCM2FHOXNaVVJwWjJWMGN5NXpjR3hwZENnbkp5a3VjbVYyWlhKelpTZ3BMbXB2YVc0b0p5Y3BYRzVjYmlBZ0lDQWdJQ0FnTHk4Z1NXNXpaWEowSUdOdmJXMWhjeUJoWm5SbGNpQmxkbVZ5ZVNCMGFISmxaU0JqYUdGeVlXTjBaWEp6WEc0Z0lDQWdJQ0FnSUhkb2IyeGxSR2xuWlhSeklEMGdkMmh2YkdWRWFXZGxkSE11Y21Wd2JHRmpaU2d2S0Z4Y1pIc3pmU2t2Wnl3Z0p5UXhMQ2NwWEc1Y2JpQWdJQ0FnSUNBZ0x5OGdVbVZ0YjNabElIUnlZV2xzYVc1bklHTnZiVzFoSUdsbUlIQnlaWE5sYm5SY2JpQWdJQ0FnSUNBZ2FXWWdLSGRvYjJ4bFJHbG5aWFJ6TG5Oc2FXTmxLQzB4S1NBOVBUMGdKeXduS1NCN1hHNGdJQ0FnSUNBZ0lDQWdJQ0IzYUc5c1pVUnBaMlYwY3lBOUlIZG9iMnhsUkdsblpYUnpMbk5zYVdObEtEQXNJQzB4S1Z4dUlDQWdJQ0FnSUNCOVhHNWNiaUFnSUNBZ0lDQWdMeThnVW1WMlpYSnpaU0IwYUdVZ2MzUnlhVzVuSUdKaFkyc2dkRzhnYVhSeklHOXlhV2RwYm1Gc0lHOXlaR1Z5WEc0Z0lDQWdJQ0FnSUhkb2IyeGxSR2xuWlhSeklEMGdkMmh2YkdWRWFXZGxkSE11YzNCc2FYUW9KeWNwTG5KbGRtVnljMlVvS1M1cWIybHVLQ2NuS1Z4dVhHNGdJQ0FnSUNBZ0lDOHZJSE5sYkdWamRITWdiMjVzZVNCMGFHVWdaR1ZqYVdGdGJITmNiaUFnSUNBZ0lDQWdjMjFoYkd4RWFXZGxkSE1nUFNCemRISXVjM1ZpYzNSeWFXNW5LSE4wY2k1c1pXNW5kR2dnTFNCa1pXTnBiV0ZzY3l3Z2MzUnlMbXhsYm1kMGFDbGNiaUFnSUNBZ0lDQWdMeTkwY25WdVkyRjBhVzVuSUdScFoyVjBjMXh1SUNBZ0lDQWdJQ0J6YldGc2JFUnBaMlYwY3lBOUlITnRZV3hzUkdsblpYUnpMbk4xWW5OMGNtbHVaeWd3TENCa2FYTndiR0Y1UkdWamFXMWhiSE1wWEc0Z0lDQWdJQ0FnSUM4dlhHNGdJQ0FnSUNBZ0lDOHZJRWx1YzJWeWRDQmpiMjF0WVhNZ1lXWjBaWElnWlhabGNua2dkR2h5WldVZ1kyaGhjbUZqZEdWeWMxeHVJQ0FnSUNBZ0lDQnpiV0ZzYkVScFoyVjBjeUE5SUhOdFlXeHNSR2xuWlhSekxuSmxjR3hoWTJVb0x5aGNYR1I3TTMwcEwyY3NJQ2NrTVN3bktWeHVYRzRnSUNBZ0lDQWdJQzh2SUZKbGJXOTJaU0IwY21GcGJHbHVaeUJqYjIxdFlTQnBaaUJ3Y21WelpXNTBYRzRnSUNBZ0lDQWdJR2xtSUNoemJXRnNiRVJwWjJWMGN5NXpiR2xqWlNndE1Ta2dQVDA5SUNjc0p5a2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ2MyMWhiR3hFYVdkbGRITWdQU0J6YldGc2JFUnBaMlYwY3k1emJHbGpaU2d3TENBdE1TbGNiaUFnSUNBZ0lDQWdmVnh1WEc0Z0lDQWdJQ0FnSUdadmNtMWhkSFJsWkU1MWJXSWdQU0IzYUc5c1pVUnBaMlYwY3lBcklDY3VKeUFySUhOdFlXeHNSR2xuWlhSelhHNWNiaUFnSUNBZ0lDQWdMeThnUVdSa2N5QnVaV2RwZEdsMlpYTWdZbUZqYXlCcGJseHVJQ0FnSUNBZ0lDQnBaaUFvYm1WbmFYUnBkbVVnUFQwZ2RISjFaU2tnZTF4dUlDQWdJQ0FnSUNBZ0lDQWdabTl5YldGMGRHVmtUblZ0WWlBOUlDY3RKeUFySUdadmNtMWhkSFJsWkU1MWJXSmNiaUFnSUNBZ0lDQWdmVnh1WEc0Z0lDQWdJQ0FnSUM4dklGSmxiVzkyWlNCMGNtRnBiR2x1WnlCamIyMXRZU0JwWmlCd2NtVnpaVzUwWEc0Z0lDQWdJQ0FnSUdsbUlDaG1iM0p0WVhSMFpXUk9kVzFpTG5Oc2FXTmxLQzB4S1NBOVBUMGdKeTRuS1NCN1hHNGdJQ0FnSUNBZ0lDQWdJQ0JtYjNKdFlYUjBaV1JPZFcxaUlEMGdabTl5YldGMGRHVmtUblZ0WWk1emJHbGpaU2d3TENBdE1TbGNiaUFnSUNBZ0lDQWdmVnh1WEc0Z0lDQWdJQ0FnSUhKbGRIVnliaUJtYjNKdFlYUjBaV1JPZFcxaVhHNGdJQ0FnZlNCbGJITmxJSHRjYmlBZ0lDQWdJQ0FnTHk4Z2MyVnNaV04wY3lCdmJteDVJSFJvWlNCa1pXTnBZVzFzYzF4dUlDQWdJQ0FnSUNCemJXRnNiRVJwWjJWMGN5QTlJSE4wY2k1emRXSnpkSEpwYm1jb2MzUnlMbXhsYm1kMGFDQXRJR1JsWTJsdFlXeHpMQ0J6ZEhJdWJHVnVaM1JvS1Z4dUlDQWdJQ0FnSUNBdkwzUnlkVzVqWVhScGJtY2daR2xuWlhSelhHNGdJQ0FnSUNBZ0lITnRZV3hzUkdsblpYUnpJRDBnYzIxaGJHeEVhV2RsZEhNdWMzVmljM1J5YVc1bktEQXNJR1JwYzNCc1lYbEVaV05wYldGc2N5bGNibHh1SUNBZ0lDQWdJQ0J6YldGc2JFUnBaMlYwY3lBOUlITnRZV3hzUkdsblpYUnpMbkJoWkZOMFlYSjBLR1JwYzNCc1lYbEVaV05wYldGc2N5d2dKekFuS1Z4dVhHNGdJQ0FnSUNBZ0lDOHZJRWx1YzJWeWRDQmpiMjF0WVhNZ1lXWjBaWElnWlhabGNua2dkR2h5WldVZ1kyaGhjbUZqZEdWeWMxeHVJQ0FnSUNBZ0lDQnpiV0ZzYkVScFoyVjBjeUE5SUhOdFlXeHNSR2xuWlhSekxuSmxjR3hoWTJVb0x5aGNYR1I3TTMwcEwyY3NJQ2NrTVN3bktWeHVYRzRnSUNBZ0lDQWdJQzh2SUZKbGJXOTJaU0IwY21GcGJHbHVaeUJqYjIxdFlTQnBaaUJ3Y21WelpXNTBYRzRnSUNBZ0lDQWdJR2xtSUNoemJXRnNiRVJwWjJWMGN5NXpiR2xqWlNndE1Ta2dQVDA5SUNjc0p5a2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ2MyMWhiR3hFYVdkbGRITWdQU0J6YldGc2JFUnBaMlYwY3k1emJHbGpaU2d3TENBdE1TbGNiaUFnSUNBZ0lDQWdmVnh1WEc0Z0lDQWdJQ0FnSUdadmNtMWhkSFJsWkU1MWJXSWdQU0FuTUM0bklDc2djMjFoYkd4RWFXZGxkSE5jYmx4dUlDQWdJQ0FnSUNBdkx5QkJaR1J6SUc1bFoybDBhWFpsY3lCaVlXTnJJR2x1WEc0Z0lDQWdJQ0FnSUdsbUlDaHVaV2RwZEdsMlpTQTlQU0IwY25WbEtTQjdYRzRnSUNBZ0lDQWdJQ0FnSUNCbWIzSnRZWFIwWldST2RXMWlJRDBnSnkwbklDc2dabTl5YldGMGRHVmtUblZ0WWx4dUlDQWdJQ0FnSUNCOVhHNWNiaUFnSUNBZ0lDQWdMeThnVW1WdGIzWmxJSFJ5WVdsc2FXNW5JR052YlcxaElHbG1JSEJ5WlhObGJuUmNiaUFnSUNBZ0lDQWdhV1lnS0dadmNtMWhkSFJsWkU1MWJXSXVjMnhwWTJVb0xURXBJRDA5UFNBbkxpY3BJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lHWnZjbTFoZEhSbFpFNTFiV0lnUFNCbWIzSnRZWFIwWldST2RXMWlMbk5zYVdObEtEQXNJQzB4S1Z4dUlDQWdJQ0FnSUNCOVhHNWNiaUFnSUNBZ0lDQWdjbVYwZFhKdUlHWnZjbTFoZEhSbFpFNTFiV0pjYmlBZ0lDQjlYRzU5WEc1Y2JtWjFibU4wYVc5dUlHTnZiblpsY25SSVpYZ29hR1Y0S1NCN1hHNGdJQ0FnTHk4Z1ZtRnNhV1JoZEdVZ2RHaGxJR2x1Y0hWMFhHNGdJQ0FnYVdZZ0tDRm9aWGd1YldGMFkyZ29MMTRvTUhncFAxc3dMVGxCTFVaaExXWmRLeVF2S1NrZ2UxeHVJQ0FnSUNBZ0lDQjBhSEp2ZHlCdVpYY2dSWEp5YjNJb0owbHVkbUZzYVdRZ2FHVjRZV1JsWTJsdFlXd2dhVzV3ZFhRbktWeHVJQ0FnSUgxY2JseHVJQ0FnSUdsbUlDaG9aWGd1YzNSaGNuUnpWMmwwYUNnbk1IZ25LU2tnZTF4dUlDQWdJQ0FnSUNCb1pYZ2dQU0JvWlhndWMyeHBZMlVvTWlsY2JpQWdJQ0I5WEc1Y2JpQWdJQ0F2THlCRGIyNTJaWEowSUhSb1pTQm9aWGhoWkdWamFXMWhiQ0IwYnlCa1pXTnBiV0ZzWEc0Z0lDQWdiR1YwSUdSbFkybHRZV3dnUFNBd1hHNGdJQ0FnWTI5dWMzUWdhR1Y0UkdsbmFYUnpJRDBnSnpBeE1qTTBOVFkzT0RsQlFrTkVSVVluWEc0Z0lDQWdhR1Y0SUQwZ2FHVjRMblJ2VlhCd1pYSkRZWE5sS0NsY2JseHVJQ0FnSUdadmNpQW9iR1YwSUdrZ1BTQXdPeUJwSUR3Z2FHVjRMbXhsYm1kMGFEc2dhU3NyS1NCN1hHNGdJQ0FnSUNBZ0lHTnZibk4wSUdScFoybDBJRDBnYUdWNFJHbG5hWFJ6TG1sdVpHVjRUMllvYUdWNFcybGRLVnh1SUNBZ0lDQWdJQ0JrWldOcGJXRnNJRDBnWkdWamFXMWhiQ0FxSURFMklDc2daR2xuYVhSY2JpQWdJQ0I5WEc1Y2JpQWdJQ0J5WlhSMWNtNGdaR1ZqYVcxaGJGeHVmVnh1WEc1dGIyUjFiR1V1Wlhod2IzSjBjeUE5SUh0Y2JpQWdJQ0JqYjI1MlpYSjBWMlZwTEZ4dUlDQWdJR052Ym5abGNuUklaWGdzWEc1OVhHNGlYU3dpYm1GdFpYTWlPbHRkTENKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVltRmphMmR5YjNWdVpDNUlRVk5JWDFKRlJsOHpabUU0TVdNMFpHWTRZak01Wm1JMkxtcHpMbTFoY0NKOVxuIiwiY29uc3QgeyBjb252ZXJ0V2VpLCBjb252ZXJ0SGV4IH0gPSByZXF1aXJlKCcuL2NvbnZlcnRlcnMnKVxuXG5jaHJvbWUuY29udGV4dE1lbnVzLmNyZWF0ZSh7XG4gICAgaWQ6ICdXZWkgdG8gRXRoJyxcbiAgICB0aXRsZTogJ1dlaSB0byBFdGgnLFxuICAgIGNvbnRleHRzOiBbJ3NlbGVjdGlvbiddLFxufSlcblxuY2hyb21lLmNvbnRleHRNZW51cy5jcmVhdGUoe1xuICAgIGlkOiAnSGV4IENvbnZlcnRlcicsXG4gICAgdGl0bGU6ICdIZXggQ29udmVydGVyJyxcbiAgICBjb250ZXh0czogWydzZWxlY3Rpb24nXSxcbn0pXG5cbmxldCBjb25maWcgPSB7XG4gICAgZGVjaW1hbHNWYWx1ZTogMSxcbiAgICBkaXNwbGF5RGVjaW1hbHNWYWx1ZTogMSxcbn1cbmNocm9tZS5zdG9yYWdlLmxvY2FsLmdldChbJ2RlY2ltYWxzJ10pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgIGNvbmZpZy5kZWNpbWFsc1ZhbHVlID0gK3Jlc3VsdC5kZWNpbWFsc1xufSlcblxuY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KFsnZGlzcGxheURlY2ltYWxzJ10pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgIGNvbmZpZy5kaXNwbGF5RGVjaW1hbHNWYWx1ZSA9ICtyZXN1bHQuZGlzcGxheURlY2ltYWxzXG59KVxuXG5sZXQgcHJlQ29udmVydGVkXG5jaHJvbWUuY29udGV4dE1lbnVzLm9uQ2xpY2tlZC5hZGRMaXN0ZW5lcihmdW5jdGlvbiAoaW5mbywgdGFiKSB7XG4gICAgaWYgKGluZm8ubWVudUl0ZW1JZCA9PT0gJ1dlaSB0byBFdGgnKSB7XG4gICAgICAgIHByZUNvbnZlcnRlZCA9IGluZm8uc2VsZWN0aW9uVGV4dFxuICAgICAgICBjb25zb2xlLmxvZyhjb25maWcuZGVjaW1hbHNWYWx1ZSlcbiAgICAgICAgY29uc29sZS5sb2coY29uZmlnLmRpc3BsYXlEZWNpbWFsc1ZhbHVlKVxuXG4gICAgICAgIGxldCBjb252ZXJ0ZWRFdGggPSBjb252ZXJ0V2VpKFxuICAgICAgICAgICAgaW5mby5zZWxlY3Rpb25UZXh0LFxuICAgICAgICAgICAgY29uZmlnLmRlY2ltYWxzVmFsdWUsXG4gICAgICAgICAgICBjb25maWcuZGlzcGxheURlY2ltYWxzVmFsdWVcbiAgICAgICAgKVxuICAgICAgICBjb25zb2xlLmxvZyhwcmVDb252ZXJ0ZWQpXG4gICAgICAgIGNvbnNvbGUubG9nKGNvbnZlcnRlZEV0aClcbiAgICAgICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHsgU3RyOiBjb252ZXJ0ZWRFdGggfSlcbiAgICAgICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHsgY29udmVyc2lvblR5cGU6ICd3ZWknIH0pXG4gICAgICAgIGNocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7IHByZUNvbnZlcnRlZDogcHJlQ29udmVydGVkIH0pXG4gICAgfVxufSlcblxuY2hyb21lLmNvbnRleHRNZW51cy5vbkNsaWNrZWQuYWRkTGlzdGVuZXIoZnVuY3Rpb24gKGluZm8sIHRhYikge1xuICAgIGlmIChpbmZvLm1lbnVJdGVtSWQgPT09ICdIZXggQ29udmVydGVyJykge1xuICAgICAgICBwcmVDb252ZXJ0ZWQgPSBpbmZvLnNlbGVjdGlvblRleHRcbiAgICAgICAgbGV0IGNvbnZlcnRlZEhleCA9IGNvbnZlcnRIZXgoaW5mby5zZWxlY3Rpb25UZXh0KVxuICAgICAgICBsZXQgY3V0SGV4ID0gY29udmVydFdlaShcbiAgICAgICAgICAgIGNvbnZlcnRlZEhleCxcbiAgICAgICAgICAgIGNvbmZpZy5kZWNpbWFsc1ZhbHVlLFxuICAgICAgICAgICAgY29uZmlnLmRpc3BsYXlEZWNpbWFsc1ZhbHVlXG4gICAgICAgIClcbiAgICAgICAgY29uc29sZS5sb2cocHJlQ29udmVydGVkKVxuICAgICAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoeyBTdHI6IGN1dEhleCB9KVxuICAgICAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoeyBjb252ZXJzaW9uVHlwZTogJ2hleCcgfSlcbiAgICAgICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHsgcHJlQ29udmVydGVkOiBwcmVDb252ZXJ0ZWQgfSlcbiAgICB9XG59KVxuIiwiZnVuY3Rpb24gY29udmVydFdlaShudW0sIGRlY2ltYWxzLCBkaXNwbGF5RGVjaW1hbHMpIHtcbiAgICBsZXQgc3RyID0gbnVtLnRvU3RyaW5nKClcbiAgICBsZXQgd2hvbGVEaWdldHNcbiAgICBsZXQgc21hbGxEaWdldHNcbiAgICBsZXQgZm9ybWF0dGVkTnVtYlxuICAgIGxldCBuZWdpdGl2ZVxuXG4gICAgaWYgKHN0ci5jaGFyQXQoMCkgPT09ICctJykge1xuICAgICAgICBzdHIgPSBzdHIuc3Vic3RyaW5nKDEpXG4gICAgICAgIG5lZ2l0aXZlID0gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICAgIG5lZ2l0aXZlID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoc3RyLmxlbmd0aCA+IGRlY2ltYWxzKSB7XG4gICAgICAgIHdob2xlRGlnZXRzID0gc3RyLnN1YnN0cmluZygwLCBzdHIubGVuZ3RoIC0gZGVjaW1hbHMpXG5cbiAgICAgICAgLy8gUmV2ZXJzZSB0aGUgc3RyaW5nIGZvciBlYXNpZXIgbWFuaXB1bGF0aW9uXG4gICAgICAgIHdob2xlRGlnZXRzID0gd2hvbGVEaWdldHMuc3BsaXQoJycpLnJldmVyc2UoKS5qb2luKCcnKVxuXG4gICAgICAgIC8vIEluc2VydCBjb21tYXMgYWZ0ZXIgZXZlcnkgdGhyZWUgY2hhcmFjdGVyc1xuICAgICAgICB3aG9sZURpZ2V0cyA9IHdob2xlRGlnZXRzLnJlcGxhY2UoLyhcXGR7M30pL2csICckMSwnKVxuXG4gICAgICAgIC8vIFJlbW92ZSB0cmFpbGluZyBjb21tYSBpZiBwcmVzZW50XG4gICAgICAgIGlmICh3aG9sZURpZ2V0cy5zbGljZSgtMSkgPT09ICcsJykge1xuICAgICAgICAgICAgd2hvbGVEaWdldHMgPSB3aG9sZURpZ2V0cy5zbGljZSgwLCAtMSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJldmVyc2UgdGhlIHN0cmluZyBiYWNrIHRvIGl0cyBvcmlnaW5hbCBvcmRlclxuICAgICAgICB3aG9sZURpZ2V0cyA9IHdob2xlRGlnZXRzLnNwbGl0KCcnKS5yZXZlcnNlKCkuam9pbignJylcblxuICAgICAgICAvLyBzZWxlY3RzIG9ubHkgdGhlIGRlY2lhbWxzXG4gICAgICAgIHNtYWxsRGlnZXRzID0gc3RyLnN1YnN0cmluZyhzdHIubGVuZ3RoIC0gZGVjaW1hbHMsIHN0ci5sZW5ndGgpXG4gICAgICAgIC8vdHJ1bmNhdGluZyBkaWdldHNcbiAgICAgICAgc21hbGxEaWdldHMgPSBzbWFsbERpZ2V0cy5zdWJzdHJpbmcoMCwgZGlzcGxheURlY2ltYWxzKVxuICAgICAgICAvL1xuICAgICAgICAvLyBJbnNlcnQgY29tbWFzIGFmdGVyIGV2ZXJ5IHRocmVlIGNoYXJhY3RlcnNcbiAgICAgICAgc21hbGxEaWdldHMgPSBzbWFsbERpZ2V0cy5yZXBsYWNlKC8oXFxkezN9KS9nLCAnJDEsJylcblxuICAgICAgICAvLyBSZW1vdmUgdHJhaWxpbmcgY29tbWEgaWYgcHJlc2VudFxuICAgICAgICBpZiAoc21hbGxEaWdldHMuc2xpY2UoLTEpID09PSAnLCcpIHtcbiAgICAgICAgICAgIHNtYWxsRGlnZXRzID0gc21hbGxEaWdldHMuc2xpY2UoMCwgLTEpXG4gICAgICAgIH1cblxuICAgICAgICBmb3JtYXR0ZWROdW1iID0gd2hvbGVEaWdldHMgKyAnLicgKyBzbWFsbERpZ2V0c1xuXG4gICAgICAgIC8vIEFkZHMgbmVnaXRpdmVzIGJhY2sgaW5cbiAgICAgICAgaWYgKG5lZ2l0aXZlID09IHRydWUpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZE51bWIgPSAnLScgKyBmb3JtYXR0ZWROdW1iXG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW1vdmUgdHJhaWxpbmcgY29tbWEgaWYgcHJlc2VudFxuICAgICAgICBpZiAoZm9ybWF0dGVkTnVtYi5zbGljZSgtMSkgPT09ICcuJykge1xuICAgICAgICAgICAgZm9ybWF0dGVkTnVtYiA9IGZvcm1hdHRlZE51bWIuc2xpY2UoMCwgLTEpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZm9ybWF0dGVkTnVtYlxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHNlbGVjdHMgb25seSB0aGUgZGVjaWFtbHNcbiAgICAgICAgc21hbGxEaWdldHMgPSBzdHIuc3Vic3RyaW5nKHN0ci5sZW5ndGggLSBkZWNpbWFscywgc3RyLmxlbmd0aClcbiAgICAgICAgLy90cnVuY2F0aW5nIGRpZ2V0c1xuICAgICAgICBzbWFsbERpZ2V0cyA9IHNtYWxsRGlnZXRzLnN1YnN0cmluZygwLCBkaXNwbGF5RGVjaW1hbHMpXG5cbiAgICAgICAgc21hbGxEaWdldHMgPSBzbWFsbERpZ2V0cy5wYWRTdGFydChkaXNwbGF5RGVjaW1hbHMsICcwJylcblxuICAgICAgICAvLyBJbnNlcnQgY29tbWFzIGFmdGVyIGV2ZXJ5IHRocmVlIGNoYXJhY3RlcnNcbiAgICAgICAgc21hbGxEaWdldHMgPSBzbWFsbERpZ2V0cy5yZXBsYWNlKC8oXFxkezN9KS9nLCAnJDEsJylcblxuICAgICAgICAvLyBSZW1vdmUgdHJhaWxpbmcgY29tbWEgaWYgcHJlc2VudFxuICAgICAgICBpZiAoc21hbGxEaWdldHMuc2xpY2UoLTEpID09PSAnLCcpIHtcbiAgICAgICAgICAgIHNtYWxsRGlnZXRzID0gc21hbGxEaWdldHMuc2xpY2UoMCwgLTEpXG4gICAgICAgIH1cblxuICAgICAgICBmb3JtYXR0ZWROdW1iID0gJzAuJyArIHNtYWxsRGlnZXRzXG5cbiAgICAgICAgLy8gQWRkcyBuZWdpdGl2ZXMgYmFjayBpblxuICAgICAgICBpZiAobmVnaXRpdmUgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgZm9ybWF0dGVkTnVtYiA9ICctJyArIGZvcm1hdHRlZE51bWJcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbW92ZSB0cmFpbGluZyBjb21tYSBpZiBwcmVzZW50XG4gICAgICAgIGlmIChmb3JtYXR0ZWROdW1iLnNsaWNlKC0xKSA9PT0gJy4nKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWROdW1iID0gZm9ybWF0dGVkTnVtYi5zbGljZSgwLCAtMSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmb3JtYXR0ZWROdW1iXG4gICAgfVxufVxuXG5mdW5jdGlvbiBjb252ZXJ0SGV4KGhleCkge1xuICAgIC8vIFZhbGlkYXRlIHRoZSBpbnB1dFxuICAgIGlmICghaGV4Lm1hdGNoKC9eKDB4KT9bMC05QS1GYS1mXSskLykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGhleGFkZWNpbWFsIGlucHV0JylcbiAgICB9XG5cbiAgICBpZiAoaGV4LnN0YXJ0c1dpdGgoJzB4JykpIHtcbiAgICAgICAgaGV4ID0gaGV4LnNsaWNlKDIpXG4gICAgfVxuXG4gICAgLy8gQ29udmVydCB0aGUgaGV4YWRlY2ltYWwgdG8gZGVjaW1hbFxuICAgIGxldCBkZWNpbWFsID0gMFxuICAgIGNvbnN0IGhleERpZ2l0cyA9ICcwMTIzNDU2Nzg5QUJDREVGJ1xuICAgIGhleCA9IGhleC50b1VwcGVyQ2FzZSgpXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhleC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBkaWdpdCA9IGhleERpZ2l0cy5pbmRleE9mKGhleFtpXSlcbiAgICAgICAgZGVjaW1hbCA9IGRlY2ltYWwgKiAxNiArIGRpZ2l0XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlY2ltYWxcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgY29udmVydFdlaSxcbiAgICBjb252ZXJ0SGV4LFxufVxuIl0sIm5hbWVzIjpbIiQxNzY3ZjQxZTRhZmNlMzA0JHZhciRwcmVDb252ZXJ0ZWQiLCIkMjEzYTZjNjkxMzhmZWZiYSRleHBvcnRzIiwiJDE3NjdmNDFlNGFmY2UzMDQkcmVxdWlyZSRjb252ZXJ0V2VpIiwiY29udmVydFdlaSIsIm51bSIsImRlY2ltYWxzIiwiZGlzcGxheURlY2ltYWxzIiwid2hvbGVEaWdldHMiLCJzbWFsbERpZ2V0cyIsImZvcm1hdHRlZE51bWIiLCJuZWdpdGl2ZSIsInN0ciIsInRvU3RyaW5nIiwiY2hhckF0Iiwic3Vic3RyaW5nIiwibGVuZ3RoIiwic3BsaXQiLCJyZXZlcnNlIiwiam9pbiIsInJlcGxhY2UiLCJzbGljZSIsInBhZFN0YXJ0IiwiY29udmVydEhleCIsImhleCIsIm1hdGNoIiwiRXJyb3IiLCJzdGFydHNXaXRoIiwiZGVjaW1hbCIsInRvVXBwZXJDYXNlIiwiaSIsImRpZ2l0IiwiaGV4RGlnaXRzIiwiaW5kZXhPZiIsIiQxNzY3ZjQxZTRhZmNlMzA0JHJlcXVpcmUkY29udmVydEhleCIsImNocm9tZSIsImNvbnRleHRNZW51cyIsImNyZWF0ZSIsImlkIiwidGl0bGUiLCJjb250ZXh0cyIsIiQxNzY3ZjQxZTRhZmNlMzA0JHZhciRjb25maWciLCJkZWNpbWFsc1ZhbHVlIiwiZGlzcGxheURlY2ltYWxzVmFsdWUiLCJzdG9yYWdlIiwibG9jYWwiLCJnZXQiLCJ0aGVuIiwicmVzdWx0Iiwib25DbGlja2VkIiwiYWRkTGlzdGVuZXIiLCJpbmZvIiwidGFiIiwibWVudUl0ZW1JZCIsInNlbGVjdGlvblRleHQiLCJjb25zb2xlIiwibG9nIiwiY29udmVydGVkRXRoIiwic2V0IiwiU3RyIiwiY29udmVyc2lvblR5cGUiLCJwcmVDb252ZXJ0ZWQiLCJjdXRIZXgiXSwidmVyc2lvbiI6MywiZmlsZSI6ImJhY2tncm91bmQuSEFTSF9SRUZfM2ZhODFjNGRmOGIzOWZiNi5qcy5tYXAifQ==
